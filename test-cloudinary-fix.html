<!DOCTYPE html>
<html>
<head>
    <title>‚úÖ Test Ultra Simple</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        button { padding: 10px 20px; font-size: 16px; margin: 10px; }
        #result { margin-top: 20px; padding: 15px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>üéØ TEST CLOUDINARY DIRECT</h1>
    
    <input type="file" id="fileInput" accept="image/*">
    <button onclick="testUpload()">üöÄ TESTER MAINTENANT</button>
    
    <div id="result"></div>
    
    <script>
    async function testUpload() {
        const fileInput = document.getElementById('fileInput');
        const resultDiv = document.getElementById('result');
        
        if (!fileInput.files[0]) {
            resultDiv.innerHTML = '‚ùå S√©lectionnez d\'abord une image !';
            return;
        }
        
        resultDiv.innerHTML = '‚è≥ Test en cours...';
        
        try {
            const formData = new FormData();
            formData.append('image', fileInput.files[0]);
            
            console.log('üîÑ Envoi vers:', 'https://mireb-5.onrender.com/api/upload/single');
            console.log('üìÅ Fichier:', fileInput.files[0].name);
            
            const response = await fetch('https://mireb-5.onrender.com/api/upload/single', {
                method: 'POST',
                body: formData
            });
            
            console.log('üì• Statut r√©ponse:', response.status);
            
            if (!response.ok) {
                const errorText = await response.text();
                throw new Error(`HTTP ${response.status}: ${errorText}`);
            }
            
            const result = await response.json();
            console.log('‚úÖ R√©ponse compl√®te:', result);
            
            if (result.success) {
                resultDiv.innerHTML = `
                    <div class="success">
                        ‚úÖ SUCC√àS ! Image upload√©e vers Cloudinary<br>
                        <strong>URL:</strong> ${result.data.url}<br>
                        <strong>ID:</strong> ${result.data.public_id}<br>
                        <img src="${result.data.url}" style="max-width: 300px; margin-top: 10px;" alt="Image upload√©e">
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `<div class="error">‚ùå √âCHEC: ${result.message}</div>`;
            }
            
        } catch (error) {
            console.error('‚ùå Erreur:', error);
            resultDiv.innerHTML = `
                <div class="error">
                    ‚ùå ERREUR: ${error.message}<br>
                    V√©rifiez la console pour plus de d√©tails.
                </div>
            `;
        }
    }
    </script>
</body>
</html>
